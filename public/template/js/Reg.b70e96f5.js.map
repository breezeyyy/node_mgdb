{"version":3,"sources":["webpack:///./src/views/Reg.vue?8fe8","webpack:///./node_modules/vant/es/toast/style/less.js","webpack:///./src/views/Reg.vue?83bf","webpack:///src/views/Reg.vue","webpack:///./src/views/Reg.vue?f668","webpack:///./src/views/Reg.vue","webpack:///./node_modules/vant/es/toast/lock-click.js","webpack:///./node_modules/vant/es/toast/Toast.js","webpack:///./node_modules/vant/es/toast/index.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","on","onClickLeft","_v","onSubmit","required","message","model","value","callback","$$v","username","expression","password","nikename","scopedSlots","_u","key","fn","fileList","proxy","staticClass","staticRenderFns","component","lockCount","lockClick","lock","document","body","classList","add","remove","_createNamespace","create","createComponent","bem","mixins","props","icon","String","className","iconPrefix","loadingType","forbidClick","Boolean","closeOnClick","Number","type","default","position","transition","lockScroll","data","clickable","mounted","toggleClickable","destroyed","watch","methods","onClick","close","onAfterEnter","$emit","onOpened","onAfterLeave","genIcon","h","hasIcon","genMessage","_ref","arguments","name","defaultOptions","mask","overlay","onClose","duration","undefined","getContainer","overlayStyle","closeOnClickOverlay","defaultOptionsMap","queue","multiple","currentOptions","parseOptions","isInDocument","element","contains","createInstance","filter","item","$el","parentNode","length","toast","extend","el","createElement","$on","push","transformOptions","options","updateZIndex","clear","clearTimeout","timer","$destroy","setTimeout","forEach","method","all","shift","setDefaultOptions","resetDefaultOptions","allowMultiple","install","use","prototype","$toast"],"mappings":"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","file":"js/Reg.b70e96f5.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Reg.vue?vue&type=style&index=0&id=0ab3b066&scoped=true&lang=scss&\"","import '../../style/base.less';\nimport '../../overlay/index.less';\nimport '../../info/index.less';\nimport '../../icon/index.less';\nimport '../../popup/index.less';\nimport '../../loading/index.less';\nimport '../index.less';","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('van-nav-bar',{attrs:{\"title\":\"注册\",\"left-arrow\":\"\",\"fixed\":\"\",\"placeholder\":\"\",\"safe-area-inset-top\":\"\"},on:{\"click-left\":_vm.onClickLeft}}),_c('h1',[_vm._v(\"Welcome\")]),_c('van-form',{on:{\"submit\":_vm.onSubmit}},[_c('van-field',{attrs:{\"name\":\"用户名\",\"label\":\"用户名\",\"placeholder\":\"用户名\",\"rules\":[{ required: true, message: '请填写用户名' }]},model:{value:(_vm.username),callback:function ($$v) {_vm.username=$$v},expression:\"username\"}}),_c('van-field',{attrs:{\"type\":\"password\",\"name\":\"密码\",\"label\":\"密码\",\"placeholder\":\"密码\",\"rules\":[{ required: true, message: '请填写密码' }]},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_c('van-field',{attrs:{\"name\":\"昵称\",\"label\":\"昵称\",\"placeholder\":\"昵称 (可选)\"},model:{value:(_vm.nikename),callback:function ($$v) {_vm.nikename=$$v},expression:\"nikename\"}}),_c('van-field',{attrs:{\"name\":\"uploader\",\"label\":\"选择头像\"},scopedSlots:_vm._u([{key:\"input\",fn:function(){return [_c('van-uploader',{attrs:{\"multiple\":\"\",\"max-count\":1},model:{value:(_vm.fileList),callback:function ($$v) {_vm.fileList=$$v},expression:\"fileList\"}})]},proxy:true}])}),_c('div',{staticClass:\"login\"},[_c('van-button',{attrs:{\"round\":\"\",\"block\":\"\",\"type\":\"info\",\"native-type\":\"submit\",\"color\":\"#EE0A24\"}},[_vm._v(\"注册并登录 \")])],1),_c('router-link',{attrs:{\"to\":\"/login\"}},[_vm._v(\"已有账号？去登录 >\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div>\r\n\t\t<van-nav-bar\r\n\t\t\ttitle=\"注册\"\r\n\t\t\tleft-arrow\r\n\t\t\tfixed\r\n\t\t\tplaceholder\r\n\t\t\tsafe-area-inset-top\r\n\t\t\t@click-left=\"onClickLeft\"\r\n\t\t/>\r\n\t\t<h1>Welcome</h1>\r\n\t\t<van-form @submit=\"onSubmit\">\r\n\t\t\t<van-field\r\n\t\t\t\tv-model=\"username\"\r\n\t\t\t\tname=\"用户名\"\r\n\t\t\t\tlabel=\"用户名\"\r\n\t\t\t\tplaceholder=\"用户名\"\r\n\t\t\t\t:rules=\"[{ required: true, message: '请填写用户名' }]\"\r\n\t\t\t/>\r\n\t\t\t<van-field\r\n\t\t\t\tv-model=\"password\"\r\n\t\t\t\ttype=\"password\"\r\n\t\t\t\tname=\"密码\"\r\n\t\t\t\tlabel=\"密码\"\r\n\t\t\t\tplaceholder=\"密码\"\r\n\t\t\t\t:rules=\"[{ required: true, message: '请填写密码' }]\"\r\n\t\t\t/>\r\n\t\t\t<van-field\r\n\t\t\t\tv-model=\"nikename\"\r\n\t\t\t\tname=\"昵称\"\r\n\t\t\t\tlabel=\"昵称\"\r\n\t\t\t\tplaceholder=\"昵称 (可选)\"\r\n\t\t\t/>\r\n\t\t\t<van-field name=\"uploader\" label=\"选择头像\">\r\n\t\t\t\t<template #input>\r\n\t\t\t\t\t<van-uploader v-model=\"fileList\" multiple :max-count=\"1\"/>\r\n\t\t\t\t</template>\r\n\t\t\t</van-field>\r\n\t\t\t<div class=\"login\">\r\n\t\t\t\t<van-button\r\n\t\t\t\t\tround\r\n\t\t\t\t\tblock\r\n\t\t\t\t\ttype=\"info\"\r\n\t\t\t\t\tnative-type=\"submit\"\r\n\t\t\t\t\tcolor=\"#EE0A24\"\r\n\t\t\t\t>注册并登录\r\n\t\t\t\t</van-button>\r\n\t\t\t</div>\r\n\t\t\t<router-link to=\"/login\">已有账号？去登录 ></router-link>\r\n\t\t</van-form>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\t\r\n\timport Cookie from \"js-cookie\";\r\n\timport {Toast} from \"vant\";\r\n\t\r\n\texport default {\r\n\t\tname: \"reg\",\r\n\t\tdata () {\r\n\t\t\treturn {\r\n\t\t\t\tusername: '',\r\n\t\t\t\tpassword: '',\r\n\t\t\t\tnikename: '',\r\n\t\t\t\tfileList: [],\r\n\t\t\t};\r\n\t\t},\r\n\t\tbeforeRouteEnter (to, from, next) {\r\n\t\t\tconst query = Object.keys(from.query).length ? Object.keys(from.query).reduce((query, key) => `${query}${key}=${from.query[key]}&`, '?').replace(/&$/, '') : '';\r\n\t\t\tfrom.path === '/' || from.path === '/reg' || from.path === '/login' || Cookie.set('prevPath', `${from.path}${query}`);\r\n\t\t\tnext();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tonSubmit () {\r\n\t\t\t\tconst data = new FormData();\r\n\t\t\t\tdata.append(\"username\", this.username);\r\n\t\t\t\tdata.append(\"password\", this.password);\r\n\t\t\t\tthis.nikename && data.append(\"nikename\", this.nikename);\r\n\t\t\t\tthis.fileList[0] && data.append(\"icon\", this.fileList[0].file);\r\n\t\t\t\tthis.$axios.post('/reg',\r\n\t\t\t\t\tdata\r\n\t\t\t\t).then(res => {\r\n\t\t\t\t\tif (res.err) {\r\n\t\t\t\t\t\tToast(res.msg);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tCookie.set('token', res.data.token, {\r\n\t\t\t\t\t\t\texpires: 7\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.goPrev();\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(err => console.log(err));\r\n\t\t\t},\r\n\t\t\tonClickLeft () {\r\n\t\t\t\tconst path = Cookie.get('prevPath');\r\n\t\t\t\tthis.$router.replace(path === '/user' ? '/home' : path);\r\n\t\t\t\tCookie.remove('prevPath');\r\n\t\t\t},\r\n\t\t\tgoPrev () {\r\n\t\t\t\tconst path = Cookie.get('prevPath');\r\n\t\t\t\tCookie.remove('prevPath');\r\n\t\t\t\tthis.$router.push(path);\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\th1 {\r\n\t\tcolor: #EE0A24;\r\n\t\tmargin-top: 0.3rem;\r\n\t\ttext-align: center;\r\n\t}\r\n\t\r\n\t.van-form {\r\n\t\tmargin-top: 0.4rem;\r\n\t\t\r\n\t\t.van-field {\r\n\t\t\tmargin: 0.2rem 0;\r\n\t\t}\r\n\t\t\r\n\t\t.login {\r\n\t\t\tmargin: 0.6rem 0.16rem 0.3rem;\r\n\t\t}\r\n\t\t\r\n\t\ta:last-child {\r\n\t\t\tdisplay: block;\r\n\t\t\tmargin-right: 0.2rem;\r\n\t\t\ttext-align: right;\r\n\t\t}\r\n\t}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Reg.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Reg.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Reg.vue?vue&type=template&id=0ab3b066&scoped=true&\"\nimport script from \"./Reg.vue?vue&type=script&lang=js&\"\nexport * from \"./Reg.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Reg.vue?vue&type=style&index=0&id=0ab3b066&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0ab3b066\",\n  null\n  \n)\n\nexport default component.exports","var lockCount = 0;\nexport function lockClick(lock) {\n  if (lock) {\n    if (!lockCount) {\n      document.body.classList.add('van-toast--unclickable');\n    }\n\n    lockCount++;\n  } else {\n    lockCount--;\n\n    if (!lockCount) {\n      document.body.classList.remove('van-toast--unclickable');\n    }\n  }\n}","// Utils\nimport { createNamespace, isDef } from '../utils';\nimport { lockClick } from './lock-click'; // Mixins\n\nimport { PopupMixin } from '../mixins/popup'; // Components\n\nimport Icon from '../icon';\nimport Loading from '../loading';\n\nvar _createNamespace = createNamespace('toast'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1];\n\nexport default createComponent({\n  mixins: [PopupMixin()],\n  props: {\n    icon: String,\n    className: null,\n    iconPrefix: String,\n    loadingType: String,\n    forbidClick: Boolean,\n    closeOnClick: Boolean,\n    message: [Number, String],\n    type: {\n      type: String,\n      default: 'text'\n    },\n    position: {\n      type: String,\n      default: 'middle'\n    },\n    transition: {\n      type: String,\n      default: 'van-fade'\n    },\n    lockScroll: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data: function data() {\n    return {\n      clickable: false\n    };\n  },\n  mounted: function mounted() {\n    this.toggleClickable();\n  },\n  destroyed: function destroyed() {\n    this.toggleClickable();\n  },\n  watch: {\n    value: 'toggleClickable',\n    forbidClick: 'toggleClickable'\n  },\n  methods: {\n    onClick: function onClick() {\n      if (this.closeOnClick) {\n        this.close();\n      }\n    },\n    toggleClickable: function toggleClickable() {\n      var clickable = this.value && this.forbidClick;\n\n      if (this.clickable !== clickable) {\n        this.clickable = clickable;\n        lockClick(clickable);\n      }\n    },\n\n    /* istanbul ignore next */\n    onAfterEnter: function onAfterEnter() {\n      this.$emit('opened');\n\n      if (this.onOpened) {\n        this.onOpened();\n      }\n    },\n    onAfterLeave: function onAfterLeave() {\n      this.$emit('closed');\n    },\n    genIcon: function genIcon() {\n      var h = this.$createElement;\n      var icon = this.icon,\n          type = this.type,\n          iconPrefix = this.iconPrefix,\n          loadingType = this.loadingType;\n      var hasIcon = icon || type === 'success' || type === 'fail';\n\n      if (hasIcon) {\n        return h(Icon, {\n          \"class\": bem('icon'),\n          \"attrs\": {\n            \"classPrefix\": iconPrefix,\n            \"name\": icon || type\n          }\n        });\n      }\n\n      if (type === 'loading') {\n        return h(Loading, {\n          \"class\": bem('loading'),\n          \"attrs\": {\n            \"type\": loadingType\n          }\n        });\n      }\n    },\n    genMessage: function genMessage() {\n      var h = this.$createElement;\n      var type = this.type,\n          message = this.message;\n\n      if (!isDef(message) || message === '') {\n        return;\n      }\n\n      if (type === 'html') {\n        return h(\"div\", {\n          \"class\": bem('text'),\n          \"domProps\": {\n            \"innerHTML\": message\n          }\n        });\n      }\n\n      return h(\"div\", {\n        \"class\": bem('text')\n      }, [message]);\n    }\n  },\n  render: function render() {\n    var _ref;\n\n    var h = arguments[0];\n    return h(\"transition\", {\n      \"attrs\": {\n        \"name\": this.transition\n      },\n      \"on\": {\n        \"afterEnter\": this.onAfterEnter,\n        \"afterLeave\": this.onAfterLeave\n      }\n    }, [h(\"div\", {\n      \"directives\": [{\n        name: \"show\",\n        value: this.value\n      }],\n      \"class\": [bem([this.position, (_ref = {}, _ref[this.type] = !this.icon, _ref)]), this.className],\n      \"on\": {\n        \"click\": this.onClick\n      }\n    }, [this.genIcon(), this.genMessage()])]);\n  }\n});","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport Vue from 'vue';\nimport VueToast from './Toast';\nimport { isObject, isServer } from '../utils';\nimport { removeNode } from '../utils/dom/node';\nvar defaultOptions = {\n  icon: '',\n  type: 'text',\n  // @deprecated\n  mask: false,\n  value: true,\n  message: '',\n  className: '',\n  overlay: false,\n  onClose: null,\n  onOpened: null,\n  duration: 2000,\n  iconPrefix: undefined,\n  position: 'middle',\n  transition: 'van-fade',\n  forbidClick: false,\n  loadingType: undefined,\n  getContainer: 'body',\n  overlayStyle: null,\n  closeOnClick: false,\n  closeOnClickOverlay: false\n}; // default options of specific type\n\nvar defaultOptionsMap = {};\nvar queue = [];\nvar multiple = false;\n\nvar currentOptions = _extends({}, defaultOptions);\n\nfunction parseOptions(message) {\n  if (isObject(message)) {\n    return message;\n  }\n\n  return {\n    message: message\n  };\n}\n\nfunction isInDocument(element) {\n  return document.body.contains(element);\n}\n\nfunction createInstance() {\n  /* istanbul ignore if */\n  if (isServer) {\n    return {};\n  }\n\n  queue = queue.filter(function (item) {\n    return !item.$el.parentNode || isInDocument(item.$el);\n  });\n\n  if (!queue.length || multiple) {\n    var toast = new (Vue.extend(VueToast))({\n      el: document.createElement('div')\n    });\n    toast.$on('input', function (value) {\n      toast.value = value;\n    });\n    queue.push(toast);\n  }\n\n  return queue[queue.length - 1];\n} // transform toast options to popup props\n\n\nfunction transformOptions(options) {\n  return _extends({}, options, {\n    overlay: options.mask || options.overlay,\n    mask: undefined,\n    duration: undefined\n  });\n}\n\nfunction Toast(options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var toast = createInstance(); // should add z-index if previous toast has not disappeared\n\n  if (toast.value) {\n    toast.updateZIndex();\n  }\n\n  options = parseOptions(options);\n  options = _extends({}, currentOptions, defaultOptionsMap[options.type || currentOptions.type], options);\n\n  if (process.env.NODE_ENV === 'development' && options.mask) {\n    console.warn('[Vant] Toast: \"mask\" option is deprecated, use \"overlay\" option instead.');\n  }\n\n  options.clear = function () {\n    toast.value = false;\n\n    if (options.onClose) {\n      options.onClose();\n      options.onClose = null;\n    }\n\n    if (multiple && !isServer) {\n      toast.$on('closed', function () {\n        clearTimeout(toast.timer);\n        queue = queue.filter(function (item) {\n          return item !== toast;\n        });\n        removeNode(toast.$el);\n        toast.$destroy();\n      });\n    }\n  };\n\n  _extends(toast, transformOptions(options));\n\n  clearTimeout(toast.timer);\n\n  if (options.duration > 0) {\n    toast.timer = setTimeout(function () {\n      toast.clear();\n    }, options.duration);\n  }\n\n  return toast;\n}\n\nvar createMethod = function createMethod(type) {\n  return function (options) {\n    return Toast(_extends({\n      type: type\n    }, parseOptions(options)));\n  };\n};\n\n['loading', 'success', 'fail'].forEach(function (method) {\n  Toast[method] = createMethod(method);\n});\n\nToast.clear = function (all) {\n  if (queue.length) {\n    if (all) {\n      queue.forEach(function (toast) {\n        toast.clear();\n      });\n      queue = [];\n    } else if (!multiple) {\n      queue[0].clear();\n    } else {\n      queue.shift().clear();\n    }\n  }\n};\n\nToast.setDefaultOptions = function (type, options) {\n  if (typeof type === 'string') {\n    defaultOptionsMap[type] = options;\n  } else {\n    _extends(currentOptions, type);\n  }\n};\n\nToast.resetDefaultOptions = function (type) {\n  if (typeof type === 'string') {\n    defaultOptionsMap[type] = null;\n  } else {\n    currentOptions = _extends({}, defaultOptions);\n    defaultOptionsMap = {};\n  }\n};\n\nToast.allowMultiple = function (value) {\n  if (value === void 0) {\n    value = true;\n  }\n\n  multiple = value;\n};\n\nToast.install = function () {\n  Vue.use(VueToast);\n};\n\nVue.prototype.$toast = Toast;\nexport default Toast;"],"sourceRoot":""}
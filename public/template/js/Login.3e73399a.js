(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Login"],{"433b":function(e,t,n){"use strict";n("3cd0"),n("1812"),n("1a44"),n("acc2"),n("5e5e"),n("25bb"),n("7f98")},"7f98":function(e,t,n){},a55a:function(e,t,n){"use strict";n("b7cf")},a55b:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("van-nav-bar",{attrs:{title:"登录","left-arrow":"",fixed:"",placeholder:"","safe-area-inset-top":""},on:{"click-left":e.onClickLeft}}),n("h1",[e._v("Welcome")]),n("van-form",{on:{submit:e.onSubmit}},[n("van-field",{attrs:{name:"用户名",label:"用户名",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"}]},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),n("van-field",{attrs:{type:"password",name:"密码",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("div",{staticClass:"login"},[n("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit",color:"#EE0A24"}},[e._v("登录 ")])],1),n("router-link",{attrs:{to:"/reg"}},[e._v("还没有账号？去注册 >")])],1)],1)},o=[],i=(n("433b"),n("d399")),r=(n("b64b"),n("ac1f"),n("5319"),n("d3b7"),n("99af"),n("852e")),s=n.n(r),c={name:"login",data:function(){return{username:"",password:""}},beforeRouteEnter:function(e,t,n){var a=Object.keys(t.query).length?Object.keys(t.query).reduce((function(e,n){return"".concat(e).concat(n,"=").concat(t.query[n],"&")}),"?").replace(/&$/,""):"";"/"===t.path||"/reg"===t.path||"/login"===t.path||s.a.set("prevPath","".concat(t.path).concat(a)),n()},methods:{onSubmit:function(){var e=this;this.$axios.post("/login",{username:this.username,password:this.password}).then((function(t){t.err?Object(i["a"])(t.msg):(s.a.set("token",t.data.token,{expires:7}),e.goPrev())})).catch((function(e){return console.log(e)}))},onClickLeft:function(){var e=s.a.get("prevPath");this.$router.replace("/user"===e?"/home":e),s.a.remove("prevPath")},goPrev:function(){var e=s.a.get("prevPath");s.a.remove("prevPath"),this.$router.push(e)}}},l=c,u=(n("a55a"),n("2877")),f=Object(u["a"])(l,a,o,!1,null,"7bcd84a0",null);t["default"]=f.exports},b7cf:function(e,t,n){},d399:function(e,t,n){"use strict";var a=n("c31d"),o=n("2b0e"),i=n("d282"),r=n("a142"),s=0;function c(e){e?(s||document.body.classList.add("van-toast--unclickable"),s++):(s--,s||document.body.classList.remove("van-toast--unclickable"))}var l=n("6605"),u=n("ad06"),f=n("543e"),d=Object(i["a"])("toast"),p=d[0],v=d[1],h=p({mixins:[Object(l["a"])()],props:{icon:String,className:null,iconPrefix:String,loadingType:String,forbidClick:Boolean,closeOnClick:Boolean,message:[Number,String],type:{type:String,default:"text"},position:{type:String,default:"middle"},transition:{type:String,default:"van-fade"},lockScroll:{type:Boolean,default:!1}},data:function(){return{clickable:!1}},mounted:function(){this.toggleClickable()},destroyed:function(){this.toggleClickable()},watch:{value:"toggleClickable",forbidClick:"toggleClickable"},methods:{onClick:function(){this.closeOnClick&&this.close()},toggleClickable:function(){var e=this.value&&this.forbidClick;this.clickable!==e&&(this.clickable=e,c(e))},onAfterEnter:function(){this.$emit("opened"),this.onOpened&&this.onOpened()},onAfterLeave:function(){this.$emit("closed")},genIcon:function(){var e=this.$createElement,t=this.icon,n=this.type,a=this.iconPrefix,o=this.loadingType,i=t||"success"===n||"fail"===n;return i?e(u["a"],{class:v("icon"),attrs:{classPrefix:a,name:t||n}}):"loading"===n?e(f["a"],{class:v("loading"),attrs:{type:o}}):void 0},genMessage:function(){var e=this.$createElement,t=this.type,n=this.message;if(Object(r["c"])(n)&&""!==n)return"html"===t?e("div",{class:v("text"),domProps:{innerHTML:n}}):e("div",{class:v("text")},[n])}},render:function(){var e,t=arguments[0];return t("transition",{attrs:{name:this.transition},on:{afterEnter:this.onAfterEnter,afterLeave:this.onAfterLeave}},[t("div",{directives:[{name:"show",value:this.value}],class:[v([this.position,(e={},e[this.type]=!this.icon,e)]),this.className],on:{click:this.onClick}},[this.genIcon(),this.genMessage()])])}}),m=n("092d"),b={icon:"",type:"text",mask:!1,value:!0,message:"",className:"",overlay:!1,onClose:null,onOpened:null,duration:2e3,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,getContainer:"body",overlayStyle:null,closeOnClick:!1,closeOnClickOverlay:!1},g={},y=[],k=!1,O=Object(a["a"])({},b);function C(e){return Object(r["e"])(e)?e:{message:e}}function w(e){return document.body.contains(e)}function x(){if(r["g"])return{};if(y=y.filter((function(e){return!e.$el.parentNode||w(e.$el)})),!y.length||k){var e=new(o["a"].extend(h))({el:document.createElement("div")});e.$on("input",(function(t){e.value=t})),y.push(e)}return y[y.length-1]}function j(e){return Object(a["a"])({},e,{overlay:e.mask||e.overlay,mask:void 0,duration:void 0})}function $(e){void 0===e&&(e={});var t=x();return t.value&&t.updateZIndex(),e=C(e),e=Object(a["a"])({},O,g[e.type||O.type],e),e.clear=function(){t.value=!1,e.onClose&&(e.onClose(),e.onClose=null),k&&!r["g"]&&t.$on("closed",(function(){clearTimeout(t.timer),y=y.filter((function(e){return e!==t})),Object(m["a"])(t.$el),t.$destroy()}))},Object(a["a"])(t,j(e)),clearTimeout(t.timer),e.duration>0&&(t.timer=setTimeout((function(){t.clear()}),e.duration)),t}var E=function(e){return function(t){return $(Object(a["a"])({type:e},C(t)))}};["loading","success","fail"].forEach((function(e){$[e]=E(e)})),$.clear=function(e){y.length&&(e?(y.forEach((function(e){e.clear()})),y=[]):k?y.shift().clear():y[0].clear())},$.setDefaultOptions=function(e,t){"string"===typeof e?g[e]=t:Object(a["a"])(O,e)},$.resetDefaultOptions=function(e){"string"===typeof e?g[e]=null:(O=Object(a["a"])({},b),g={})},$.allowMultiple=function(e){void 0===e&&(e=!0),k=e},$.install=function(){o["a"].use(h)},o["a"].prototype.$toast=$;t["a"]=$}}]);
//# sourceMappingURL=Login.3e73399a.js.map
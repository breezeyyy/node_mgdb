(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Reg"],{"12ed":function(e,t,n){"use strict";n("d1ea")},"433b":function(e,t,n){"use strict";n("3cd0"),n("1812"),n("1a44"),n("acc2"),n("5e5e"),n("25bb"),n("7f98")},"7f98":function(e,t,n){},b8b8:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("van-nav-bar",{attrs:{title:"注册","left-arrow":"",fixed:"",placeholder:"","safe-area-inset-top":""},on:{"click-left":e.onClickLeft}}),n("h1",[e._v("Welcome")]),n("van-form",{on:{submit:e.onSubmit}},[n("van-field",{attrs:{name:"用户名",label:"用户名",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"}]},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),n("van-field",{attrs:{type:"password",name:"密码",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("van-field",{attrs:{name:"昵称",label:"昵称",placeholder:"昵称 (可选)"},model:{value:e.nikename,callback:function(t){e.nikename=t},expression:"nikename"}}),n("van-field",{attrs:{name:"uploader",label:"选择头像"},scopedSlots:e._u([{key:"input",fn:function(){return[n("van-uploader",{attrs:{multiple:"","max-count":1},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}})]},proxy:!0}])}),n("div",{staticClass:"login"},[n("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit",color:"#EE0A24"}},[e._v("注册并登录 ")])],1),n("router-link",{attrs:{to:"/login"}},[e._v("已有账号？去登录 >")])],1)],1)},i=[],o=(n("433b"),n("d399")),s=(n("b64b"),n("ac1f"),n("5319"),n("d3b7"),n("99af"),n("852e")),r=n.n(s),l={name:"reg",data:function(){return{username:"",password:"",nikename:"",fileList:[]}},beforeRouteEnter:function(e,t,n){var a=Object.keys(t.query).length?Object.keys(t.query).reduce((function(e,n){return"".concat(e).concat(n,"=").concat(t.query[n],"&")}),"?").replace(/&$/,""):"";"/"===t.path||"/reg"===t.path||"/login"===t.path||r.a.set("prevPath","".concat(t.path).concat(a)),n()},methods:{onSubmit:function(){var e=this,t=new FormData;t.append("username",this.username),t.append("password",this.password),this.nikename&&t.append("nikename",this.nikename),this.fileList[0]&&t.append("icon",this.fileList[0].file),this.$axios.post("/reg",t).then((function(t){t.err?Object(o["a"])(t.msg):(r.a.set("token",t.data.token,{expires:7}),e.goPrev())})).catch((function(e){return console.log(e)}))},onClickLeft:function(){var e=r.a.get("prevPath");this.$router.replace("/user"===e?"/home":e),r.a.remove("prevPath")},goPrev:function(){var e=r.a.get("prevPath");r.a.remove("prevPath"),this.$router.push(e)}}},c=l,u=(n("12ed"),n("2877")),d=Object(u["a"])(c,a,i,!1,null,"0ab3b066",null);t["default"]=d.exports},d1ea:function(e,t,n){},d399:function(e,t,n){"use strict";var a=n("c31d"),i=n("2b0e"),o=n("d282"),s=n("a142"),r=0;function l(e){e?(r||document.body.classList.add("van-toast--unclickable"),r++):(r--,r||document.body.classList.remove("van-toast--unclickable"))}var c=n("6605"),u=n("ad06"),d=n("543e"),f=Object(o["a"])("toast"),p=f[0],m=f[1],v=p({mixins:[Object(c["a"])()],props:{icon:String,className:null,iconPrefix:String,loadingType:String,forbidClick:Boolean,closeOnClick:Boolean,message:[Number,String],type:{type:String,default:"text"},position:{type:String,default:"middle"},transition:{type:String,default:"van-fade"},lockScroll:{type:Boolean,default:!1}},data:function(){return{clickable:!1}},mounted:function(){this.toggleClickable()},destroyed:function(){this.toggleClickable()},watch:{value:"toggleClickable",forbidClick:"toggleClickable"},methods:{onClick:function(){this.closeOnClick&&this.close()},toggleClickable:function(){var e=this.value&&this.forbidClick;this.clickable!==e&&(this.clickable=e,l(e))},onAfterEnter:function(){this.$emit("opened"),this.onOpened&&this.onOpened()},onAfterLeave:function(){this.$emit("closed")},genIcon:function(){var e=this.$createElement,t=this.icon,n=this.type,a=this.iconPrefix,i=this.loadingType,o=t||"success"===n||"fail"===n;return o?e(u["a"],{class:m("icon"),attrs:{classPrefix:a,name:t||n}}):"loading"===n?e(d["a"],{class:m("loading"),attrs:{type:i}}):void 0},genMessage:function(){var e=this.$createElement,t=this.type,n=this.message;if(Object(s["c"])(n)&&""!==n)return"html"===t?e("div",{class:m("text"),domProps:{innerHTML:n}}):e("div",{class:m("text")},[n])}},render:function(){var e,t=arguments[0];return t("transition",{attrs:{name:this.transition},on:{afterEnter:this.onAfterEnter,afterLeave:this.onAfterLeave}},[t("div",{directives:[{name:"show",value:this.value}],class:[m([this.position,(e={},e[this.type]=!this.icon,e)]),this.className],on:{click:this.onClick}},[this.genIcon(),this.genMessage()])])}}),h=n("092d"),b={icon:"",type:"text",mask:!1,value:!0,message:"",className:"",overlay:!1,onClose:null,onOpened:null,duration:2e3,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,getContainer:"body",overlayStyle:null,closeOnClick:!1,closeOnClickOverlay:!1},g={},k=[],y=!1,O=Object(a["a"])({},b);function C(e){return Object(s["e"])(e)?e:{message:e}}function x(e){return document.body.contains(e)}function w(){if(s["g"])return{};if(k=k.filter((function(e){return!e.$el.parentNode||x(e.$el)})),!k.length||y){var e=new(i["a"].extend(v))({el:document.createElement("div")});e.$on("input",(function(t){e.value=t})),k.push(e)}return k[k.length-1]}function j(e){return Object(a["a"])({},e,{overlay:e.mask||e.overlay,mask:void 0,duration:void 0})}function $(e){void 0===e&&(e={});var t=w();return t.value&&t.updateZIndex(),e=C(e),e=Object(a["a"])({},O,g[e.type||O.type],e),e.clear=function(){t.value=!1,e.onClose&&(e.onClose(),e.onClose=null),y&&!s["g"]&&t.$on("closed",(function(){clearTimeout(t.timer),k=k.filter((function(e){return e!==t})),Object(h["a"])(t.$el),t.$destroy()}))},Object(a["a"])(t,j(e)),clearTimeout(t.timer),e.duration>0&&(t.timer=setTimeout((function(){t.clear()}),e.duration)),t}var L=function(e){return function(t){return $(Object(a["a"])({type:e},C(t)))}};["loading","success","fail"].forEach((function(e){$[e]=L(e)})),$.clear=function(e){k.length&&(e?(k.forEach((function(e){e.clear()})),k=[]):y?k.shift().clear():k[0].clear())},$.setDefaultOptions=function(e,t){"string"===typeof e?g[e]=t:Object(a["a"])(O,e)},$.resetDefaultOptions=function(e){"string"===typeof e?g[e]=null:(O=Object(a["a"])({},b),g={})},$.allowMultiple=function(e){void 0===e&&(e=!0),y=e},$.install=function(){i["a"].use(v)},i["a"].prototype.$toast=$;t["a"]=$}}]);
//# sourceMappingURL=Reg.b70e96f5.js.map